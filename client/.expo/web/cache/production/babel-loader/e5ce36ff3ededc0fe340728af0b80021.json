{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import React,{Component,Fragment}from'react';import{connect}from'react-redux';import{bindActionCreators}from'redux';import{withRouter}from'react-router-dom';import AppBar from'@material-ui/core/AppBar';import Paper from'@material-ui/core/Paper';import HomeIcon from'@material-ui/icons/Home';import Typography from'@material-ui/core/Typography';import Snackbar from'@material-ui/core/Snackbar';import LForms from\"../../../components/Forms\";import{setSnackbar}from\"../../../actions/appActions\";import{postApiContributors,getAddressByCepla}from\"../../../providers/api\";import{validaEmail,validaCpf,stringToDate}from\"../../../providers/commonMethods\";import{InputCep,InputCpf,InputPhone}from\"../../../providers/masks\";import{Redirect}from'react-router-dom';var CreateContributors=function(_Component){_inherits(CreateContributors,_Component);var _super=_createSuper(CreateContributors);function CreateContributors(){var _this;_classCallCheck(this,CreateContributors);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={contributors:[],states:[]};return _this;}_createClass(CreateContributors,[{key:\"componentDidMount\",value:function componentDidMount(){return _regeneratorRuntime.async(function componentDidMount$(_context){while(1){switch(_context.prev=_context.next){case 0:case\"end\":return _context.stop();}}},null,null,null,Promise);}},{key:\"render\",value:function render(){var _this2=this;var closeSnack=function closeSnack(event,reason){if(reason==='clickaway'){return;}_this2.props.setSnackbar({open:false,message:\"\"});};var authData=JSON.parse(localStorage.getItem(\"user\"));var flexBasis='30%';var request=function request(data){var response,errors,message;return _regeneratorRuntime.async(function request$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this2.props.setSnackbar({open:true,message:\"Validando Dados, Aguarde ...\"});data.address=JSON.stringify(data.address);data.contact=JSON.stringify(data.contact);data.active=data.active=='Ativo'?1:0;_context2.next=6;return _regeneratorRuntime.awrap(postApiContributors(data));case 6:response=_context2.sent;if(response.data.success){_this2.props.setSnackbar({open:true,message:response.data.message});_this2.props.history.goBack();}else{errors=response.data.error.response.data.errors;message='';console.log(errors);Object.keys(errors).map(function(err){console.log(err);message+=\"Campo \"+err.toUpperCase()+\" : \"+errors[err][0]+\" \\n\";});_this2.props.setSnackbar({open:true,message:message});}case 8:case\"end\":return _context2.stop();}}},null,null,null,Promise);};var validateFields=function validateFields(fields,values){var campo=undefined;fields.reverse().map(function(v,k){v.fields.reverse().map(function(v1,k1){var value=values[v1.column];if(v1.validate!==undefined){if(v1.validate.number!==undefined){if(/^[-]?\\d+$/.test(value)==false)campo={id:v1.column,message:\"o campo \"+v1.label+\" \\xE9 somente n\\xFAmeros \"};}if(v1.validate.max!==undefined){if(value.length>v1.validate.max)campo={id:v1.column,message:\"o campo \"+v1.label+\", tamanho m\\xE1ximo de \"+v1.validate.max+\" caracteres ex\\xEAdido\"};}if(v1.validate.min!==undefined){if(value.length<v1.validate.min)campo={id:v1.column,message:\"o campo \"+v1.label+\", tamanho minimo de \"+v1.validate.min+\" caracteres.\"};}if(v1.validate.required!==undefined){if(value.length==0)campo={id:v1.column,message:\"o campo \"+v1.label+\" obrigat\\xF3rio\"};}}if(v1.validateHandler!==undefined){if(v1.validateHandler(value)==false)campo={id:v1.column,message:\"O Campo \"+v1.label+\" n\\xE3o possui um conte\\xFAdo \\xE9 v\\xE1lido \"};}});});campo!==undefined?_this2.props.setSnackbar({open:true,message:campo.message}):'';return campo===undefined?true:false;};var forms=[{title:'Dados Básicos',fields:[{column:'cpf',label:'CPF',type:'text',mask:InputCpf,validate:{min:11,number:true,required:true},validateHandler:validaCpf,flexBasis:'20%',helperText:\"o valor digitado é inválido\"},{column:'name',label:'Nome',type:'text',validate:{max:50,required:true},flexBasis:flexBasis},{column:'birthdate',label:'Data de Nascimento',type:'date',validate:{required:true},flexBasis:flexBasis,style:{maxWidth:'160px'}},{column:'anexo',label:'Anexar Documento',type:'file',flexBasis:'15%',style:{maxWidth:'160px'}},{column:'function',label:'Função',type:'select',values:[\"Administração\",\"Coordenador de usuários\",\"Coordenador de parceiros\",\"Gerente\",\"Operador de marketing\",\"Vendedor\"],value:\"Coordenador de usuários\",flexBasis:flexBasis},{column:'active',label:'Situação',type:'select',values:[\"Ativo\",\"Inativo\"],value:\"Ativo\",flexBasis:flexBasis}]},{id:'addr',title:'Endereço',flexFlow:'row no-wrap',json:\"address\",fields:[{column:'cep',label:'CEP',type:'text',mask:InputCep,validate:{max:9,required:true},flexBasis:'10%'},{column:'street',label:'Endereço',validate:{max:100,required:true},type:'text',flexBasis:flexBasis},{column:'complement',label:'Complemento',type:'text',flexBasis:'20%'},{column:'state',label:'Estado',type:'select',values:[\"Acre\",\"Alagoas\",\"Amazonas\",\"Amapá\",\"Bahia\",\"Ceará\",\"Brasília\",\"Espírito Santo\",\"Goiás\",\"Maranhão\",\"Minas Gerais\",\"Mato Grosso do Sul\",\"Mato Grosso\",\"Pará\",\"Paraíba\",\"Pernambuco\",\"Piauí\",\"Paraná\",\"Rio de Janeiro\",\"Rio Grande do Norte\",\"Rondônia\",\"Roraima\",\"Rio Grande do Sul\",\"Santa Catarina\",\"Sergipe\",\"São Paulo\",\"Tocantins\"],value:\"São Paulo\",flexBasis:flexBasis,flexGrow:2,style:{minWidth:\"192px\"}},{column:'city',label:'Cidade',type:'text',validate:{max:100,required:true},flexBasis:flexBasis}]},{title:'Contato',json:'contact',fields:[{column:'contact1',label:'Contato',type:'text',mask:InputPhone,validate:{max:15,required:true},flexBasis:'20%'},{column:'contact2',label:'Contato alternativo',type:'text',mask:InputPhone,validate:{max:15},flexBasis:'20%'},{column:'email',label:'E-mail',type:'email',validate:{max:100},validateHandler:validaEmail,flexBasis:'20%'}]},{title:'Redes Sociais',json:'contact',fields:[{column:'linkedin',label:'Usuário do LinkedIn',type:'text',validate:{max:100,required:true},flexBasis:'20%'},{column:'facebook',label:'Usuário do Facebook',type:'text',validate:{max:100,required:true},flexBasis:'20%'},{column:'instagram',label:'Usuário do Instagram',type:'text',validate:{max:100,required:true},flexBasis:'20%'}]}];return React.createElement(Fragment,null,React.createElement(AppBar,{position:\"static\",style:{padding:10,marginTop:10,marginBottom:10}},React.createElement(Typography,{variant:\"h6\"},React.createElement(HomeIcon,null),\"  \",React.createElement(\"span\",null,\"Cadastro / Colaboradores\"))),React.createElement(LForms,{forms:forms,request:request,validate:function validate(values){return validateFields(forms,values);}}),React.createElement(Snackbar,{anchorOrigin:{vertical:'bottom',horizontal:'center'},open:this.props.snackbar.open,onClose:closeSnack,autoHideDuration:3000,message:this.props.snackbar.message}));}}]);return CreateContributors;}(Component);var mapStateToProps=function mapStateToProps(store){return{session:store.authReducer.data,snackbar:store.appReducer.snackbar};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({setSnackbar:setSnackbar},dispatch);};export default withRouter(connect(mapStateToProps,mapDispatchToProps)(CreateContributors));","map":{"version":3,"sources":["C:/Users/Maou/Documents/Projetos/CLIENTES/RNF/Completo/client/src/pages/Contributors/create/index.js"],"names":["React","Component","Fragment","connect","bindActionCreators","withRouter","AppBar","Paper","HomeIcon","Typography","Snackbar","LForms","setSnackbar","postApiContributors","getAddressByCepla","validaEmail","validaCpf","stringToDate","InputCep","InputCpf","InputPhone","Redirect","CreateContributors","state","contributors","states","closeSnack","event","reason","props","open","message","authData","JSON","parse","localStorage","getItem","flexBasis","request","data","address","stringify","contact","active","response","success","history","goBack","errors","error","console","log","Object","keys","map","err","toUpperCase","validateFields","fields","values","campo","undefined","reverse","v","k","v1","k1","value","column","validate","number","test","id","label","max","length","min","required","validateHandler","forms","title","type","mask","helperText","style","maxWidth","flexFlow","json","flexGrow","minWidth","padding","marginTop","marginBottom","vertical","horizontal","snackbar","mapStateToProps","store","session","authReducer","appReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\n\r\nimport { withRouter } from 'react-router-dom'\r\n\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport LForms from '../../../components/Forms';\r\n//\r\nimport { setSnackbar } from '../../../actions/appActions'\r\nimport { postApiContributors, getAddressByCepla } from '../../../providers/api'\r\nimport { validaEmail, validaCpf, stringToDate } from '../../../providers/commonMethods'\r\n\r\nimport { InputCep, InputCpf, InputPhone } from '../../../providers/masks'\r\nimport { Redirect } from 'react-router-dom';\r\nclass CreateContributors extends Component {\r\n    state = {\r\n        contributors: [],\r\n        states: []\r\n    }\r\n    async componentDidMount() {\r\n\r\n\r\n    }\r\n\r\n    render() {\r\n        const closeSnack = (event, reason) => {\r\n            if (reason === 'clickaway') {\r\n                return;\r\n            }\r\n            this.props.setSnackbar({ open: false, message: \"\" });\r\n        };\r\n\r\n        const authData = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n        const flexBasis = '30%';\r\n        const request = async (data) => {\r\n\r\n            this.props.setSnackbar({ open: true, message: \"Validando Dados, Aguarde ...\" })\r\n\r\n            data.address = JSON.stringify(data.address);\r\n            data.contact = JSON.stringify(data.contact);\r\n            data.active = data.active == 'Ativo' ? 1 : 0;\r\n            let response = await postApiContributors(data);\r\n            //console.log(response);\r\n            if (response.data.success) {\r\n                this.props.setSnackbar({ open: true, message: response.data.message });\r\n                this.props.history.goBack();\r\n            } else {\r\n                let {errors} = response.data.error.response.data\r\n                let message = '';\r\n                console.log(errors)\r\n                Object.keys(errors).map(err => {\r\n                    console.log(err);\r\n                    message += `Campo ${err.toUpperCase()} : ${errors[err][0]} \\n`;\r\n                })\r\n                //response.data.error.response.data.errors\r\n                this.props.setSnackbar({ open: true, message});\r\n            }\r\n\r\n        }\r\n        const validateFields = (fields, values) => {\r\n            //console.log(fields);\r\n            let campo = undefined;\r\n            fields.reverse().map((v,k) => {\r\n                v.fields.reverse().map((v1,k1)=>{\r\n                        let value = values[v1.column];\r\n                        if (v1.validate !== undefined) {\r\n                            if (v1.validate.number !== undefined) {\r\n                                if (/^[-]?\\d+$/.test(value) == false)\r\n                                    campo = {id: v1.column, message: `o campo ${v1.label} é somente números ` }\r\n                            }\r\n\r\n                            if (v1.validate.max !== undefined) {\r\n                                if (value.length > v1.validate.max)\r\n                                    campo = {id: v1.column, message: `o campo ${v1.label}, tamanho máximo de ${v1.validate.max} caracteres exêdido` };\r\n                            }\r\n\r\n                            if (v1.validate.min !== undefined) {\r\n                                if (value.length < v1.validate.min)\r\n                                    campo = {id: v1.column, message: `o campo ${v1.label}, tamanho minimo de ${v1.validate.min} caracteres.` };\r\n                            }\r\n\r\n                            if (v1.validate.required !== undefined) {\r\n                                if (value.length == 0)\r\n                                    campo = {id: v1.column, message: `o campo ${v1.label} obrigatório` };\r\n                            }\r\n                        }\r\n                        if(v1.validateHandler !== undefined){\r\n                            if (v1.validateHandler(value) == false)\r\n                                    campo = {id: v1.column, message: `O Campo ${v1.label} não possui um conteúdo é válido ` }\r\n                        }\r\n                    })\r\n                })\r\n                //console.log(campo)\r\n                campo !== undefined ? this.props.setSnackbar({ open: true, message: campo.message }) : '';\r\n\r\n                return campo === undefined ? true : false\r\n        }\r\n\r\n        const forms = [\r\n            {\r\n                title: 'Dados Básicos',\r\n                fields: [\r\n                    { column: 'cpf', label: 'CPF', type: 'text', mask: InputCpf, validate: {min: 11, number: true, required: true},validateHandler: validaCpf, flexBasis: '20%', helperText: \"o valor digitado é inválido\" },\r\n                    { column: 'name', label: 'Nome', type: 'text', validate: {max: 50, required: true}, flexBasis },\r\n                    { column: 'birthdate', label: 'Data de Nascimento', type: 'date', validate: {required: true},flexBasis, style:{maxWidth: '160px'} },\r\n                    { column: 'anexo', label: 'Anexar Documento', type: 'file', flexBasis:'15%', style:{maxWidth: '160px'} },\r\n                    {\r\n                        column: 'function', label: 'Função', type: 'select',\r\n                        values: [\r\n                            \"Administração\",\r\n                            \"Coordenador de usuários\", \r\n                            \"Coordenador de parceiros\", \r\n                            \"Gerente\", \r\n                            \"Operador de marketing\", \r\n                            \"Vendedor\"\r\n                        ],\r\n                        value: \"Coordenador de usuários\",\r\n                        flexBasis\r\n                    },\r\n                    //\r\n                    { column: 'active', label: 'Situação', type: 'select', values: [\"Ativo\", \"Inativo\"], value: \"Ativo\", flexBasis },\r\n                    //{ column: 'created_at', label: 'Data', type: 'date' },\r\n                ]\r\n            },\r\n            {\r\n                id: 'addr',\r\n                title: 'Endereço',\r\n                flexFlow: 'row no-wrap',\r\n                json: \"address\",\r\n                fields: [\r\n                    {\r\n                        column: 'cep', label: 'CEP', type: 'text', mask: InputCep, validate: {max: 9, required: true}, flexBasis: '10%',\r\n                        //handle: getAddress \r\n                    },\r\n                    { column: 'street', label: 'Endereço', validate: {max: 100, required: true}, type: 'text', flexBasis },\r\n                    { column: 'complement', label: 'Complemento', type: 'text', flexBasis: '20%' },\r\n                    {\r\n                        column: 'state', label: 'Estado', type: 'select',\r\n                        values: [\"Acre\", \"Alagoas\", \"Amazonas\", \"Amapá\", \"Bahia\", \"Ceará\", \"Brasília\", \"Espírito Santo\", \"Goiás\", \"Maranhão\", \"Minas Gerais\", \"Mato Grosso do Sul\", \"Mato Grosso\", \"Pará\", \"Paraíba\", \"Pernambuco\", \"Piauí\", \"Paraná\", \"Rio de Janeiro\", \"Rio Grande do Norte\", \"Rondônia\", \"Roraima\", \"Rio Grande do Sul\", \"Santa Catarina\", \"Sergipe\", \"São Paulo\", \"Tocantins\"],\r\n                        value: \"São Paulo\", flexBasis, flexGrow: 2, style:{minWidth: \"192px\"}\r\n                    },\r\n                    { column: 'city', label: 'Cidade', type: 'text', validate: {max: 100, required: true}, flexBasis },\r\n                ]\r\n            },\r\n            {\r\n                title: 'Contato',\r\n                json: 'contact',\r\n                fields: [\r\n                    { column: 'contact1', label: 'Contato', type: 'text', mask: InputPhone, validate: {max: 15, required: true}, flexBasis: '20%' },\r\n                    { column: 'contact2', label: 'Contato alternativo', type: 'text', mask: InputPhone, validate: {max: 15}, flexBasis: '20%' },\r\n                    { column: 'email', label: 'E-mail', type: 'email', validate: {max: 100}, validateHandler: validaEmail, flexBasis: '20%' },\r\n                ]\r\n            },\r\n            {\r\n                title: 'Redes Sociais',\r\n                json: 'contact',\r\n                fields: [\r\n                    { column: 'linkedin', label: 'Usuário do LinkedIn', type: 'text', validate: {max: 100, required: true}, flexBasis: '20%' },\r\n                    { column: 'facebook', label: 'Usuário do Facebook', type: 'text', validate: {max: 100, required: true}, flexBasis: '20%' },\r\n                    { column: 'instagram', label: 'Usuário do Instagram', type: 'text', validate: {max: 100, required: true}, flexBasis: '20%' },\r\n                ]\r\n            }\r\n        ]\r\n\r\n        return (\r\n            <Fragment>\r\n                <AppBar position=\"static\" style={{ padding: 10, marginTop: 10, marginBottom: 10 }}>\r\n                    <Typography variant=\"h6\">\r\n                        <HomeIcon />  <span>Cadastro / Colaboradores</span>\r\n                    </Typography>\r\n                </AppBar>\r\n                <LForms forms={forms}\r\n                    request={request} \r\n                    validate={(values) => { return validateFields(forms,values)}}\r\n                />\r\n                <Snackbar\r\n                    anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n                    open={this.props.snackbar.open}\r\n                    onClose={closeSnack}\r\n                    autoHideDuration={3000}\r\n                    message={this.props.snackbar.message}\r\n                />\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = store => ({\r\n    session: store.authReducer.data,\r\n    snackbar: store.appReducer.snackbar\r\n});\r\nconst mapDispatchToProps = dispatch =>\r\n    bindActionCreators({ setSnackbar }, dispatch);\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(CreateContributors))\r\n"]},"metadata":{},"sourceType":"module"}