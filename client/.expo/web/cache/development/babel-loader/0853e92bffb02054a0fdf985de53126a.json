{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nvar _jsxFileName = \"C:\\\\Users\\\\Maou\\\\Documents\\\\Projetos\\\\CLIENTES\\\\RNF\\\\Completo\\\\client\\\\src\\\\pages\\\\Login\\\\recovery.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { postResetPassword, postAuth, JWT_Decode } from \"../../providers/api\";\nimport { setDialog as authDialog, setAuth } from \"../../actions/authAction\";\nimport { setLoading } from \"../../actions/appActions\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport TextField from '@material-ui/core/TextField';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Slide from '@material-ui/core/Slide';\nimport logo from \"../../../assets/logo.png\";\nimport InputMask from 'react-input-mask';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      maxWidth: 350,\n      display: 'flex',\n      flexDirection: 'column',\n      margin: 'auto'\n    },\n    appBar: {\n      position: 'relative'\n    },\n    title: {\n      marginLeft: theme.spacing(2),\n      flex: 1\n    },\n    media: {\n      height: 140\n    }\n  };\n});\nvar Transition = React.forwardRef(function Transition(props, ref) {\n  return React.createElement(Slide, _extends({\n    direction: \"up\",\n    ref: ref\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 10\n    }\n  }));\n});\n\nfunction ResetPassword(props) {\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      loginError = _React$useState2[0],\n      setLoginerror = _React$useState2[1];\n\n  var _React$useState3 = React.useState({\n    success: false,\n    message: ''\n  }),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      resetError = _React$useState4[0],\n      setReseterror = _React$useState4[1];\n\n  var _React$useState5 = React.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      loading = _React$useState6[0],\n      setloading = _React$useState6[1];\n\n  var _React$useState7 = React.useState(false),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      resetpwd = _React$useState8[0],\n      setResetpwd = _React$useState8[1];\n\n  var _React$useState9 = React.useState({}),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      dados = _React$useState10[0],\n      setDados = _React$useState10[1];\n\n  var classes = useStyles();\n\n  function onChange(e) {\n    var dt = dados;\n    dt[e.target.id] = e.target.value;\n    setDados(dt);\n  }\n\n  function onSubmitReset(e) {\n    var data;\n    return _regeneratorRuntime.async(function onSubmitReset$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            e.preventDefault();\n            setloading(true);\n            dados.token = props.match.params.token;\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(putResetPassword(dados));\n\n          case 5:\n            data = _context.sent;\n\n            if (data !== undefined) {\n              if (data.data.success) {\n                setLoginerror(false);\n                setloading(false);\n                window.location.href = \"/\";\n              } else {\n                setLoginerror(true);\n                setloading(false);\n              }\n\n              props.setSnackbar({\n                open: true,\n                message: data.data.message\n              });\n            }\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function onSubmit(e) {\n    var data;\n    return _regeneratorRuntime.async(function onSubmit$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            e.preventDefault();\n            setloading(true);\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(postAuth(dados));\n\n          case 4:\n            data = _context2.sent;\n\n            if (data !== undefined) {\n              if (data.data.success) {\n                localStorage.setItem(\"user\", JSON.stringify(data.data.data.user));\n                localStorage.setItem(\"token\", data.data.token);\n                props.setAuth(data.data.data.user);\n                setLoginerror(false);\n                setloading(false);\n                window.location.href = \"/\";\n              } else {\n                setLoginerror(true);\n                setloading(false);\n              }\n            }\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  return React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }\n  }, React.createElement(\"img\", {\n    src: logo,\n    style: {\n      display: 'flex',\n      margin: 'auto'\n    },\n    height: \"150\",\n    width: \"150\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }), !resetpwd ? React.createElement(\"form\", {\n    id: \"loginform\",\n    onSubmit: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, React.createElement(Card, {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 15\n    }\n  }, React.createElement(TextField, {\n    error: loginError === true ? true : false,\n    helperText: loginError ? \"E-mail ou senha inválidos.\" : \"\",\n    type: \"text\",\n    fullWidth: true,\n    id: \"email\",\n    type: \"text\",\n    label: \"E-Mail\",\n    variant: \"outlined\",\n    onChange: onChange,\n    onBlur: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  })), React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 21\n    }\n  }), React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }, React.createElement(TextField, {\n    error: loginError === true ? true : false,\n    type: \"text\",\n    fullWidth: true,\n    id: \"password\",\n    type: \"password\",\n    label: \"Senha\",\n    variant: \"outlined\",\n    onChange: onChange,\n    onBlur: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }))), React.createElement(CardActions, {\n    style: {\n      flexDirection: 'column'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }, React.createElement(\"div\", {\n    style: {\n      marginTop: 5,\n      marginBottom: 5,\n      alignSelf: 'start'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, React.createElement(\"a\", {\n    onClick: function onClick() {\n      setResetpwd(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 15\n    }\n  }, \"Esqueceu a senha?\")), React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 19\n    }\n  }), !loading ? React.createElement(Button, {\n    variant: \"contained\",\n    size: \"large\",\n    fullWidth: true,\n    color: \"primary\",\n    disableElevation: true,\n    type: \"submit\",\n    form: \"loginform\",\n    style: {\n      background: 'linear-gradient(45deg, #025ea2 30%, #0086e8 90%)'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, \"Entrar\") : React.createElement(CircularProgress, {\n    style: {\n      margin: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  })))) : React.createElement(\"form\", {\n    id: \"loginform\",\n    onSubmit: onSubmitReset,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }\n  }, React.createElement(Card, {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }, React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 15\n    }\n  }, React.createElement(TextField, {\n    error: resetError.success,\n    helperText: resetError.success ? resetError.message : \"\",\n    type: \"text\",\n    fullWidth: true,\n    id: \"email\",\n    type: \"text\",\n    label: \"E-mail\",\n    variant: \"outlined\",\n    onChange: onChange,\n    onBlur: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 15\n    }\n  }))), React.createElement(CardActions, {\n    style: {\n      flexDirection: 'column'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 11\n    }\n  }, React.createElement(\"div\", {\n    style: {\n      marginTop: 5,\n      marginBottom: 5,\n      alignSelf: 'start'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }\n  }, React.createElement(\"a\", {\n    onClick: function onClick() {\n      setResetpwd(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 15\n    }\n  }, \"Login\")), React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 19\n    }\n  }), !loading ? React.createElement(Button, {\n    variant: \"contained\",\n    size: \"large\",\n    fullWidth: true,\n    color: \"primary\",\n    disableElevation: true,\n    type: \"submit\",\n    form: \"loginform\",\n    style: {\n      background: 'linear-gradient(45deg, #025ea2 30%, #0086e8 90%)'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }\n  }, \"Entrar\") : React.createElement(CircularProgress, {\n    style: {\n      margin: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  })))));\n}\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    aDialog: store.authReducer.authDialog,\n    data: store.authReducer.data,\n    loading: store.appReducer.loading\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    setLoading: setLoading,\n    authDialog: authDialog,\n    setAuth: setAuth,\n    JWT_Decode: JWT_Decode\n  }, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ResetPassword);","map":{"version":3,"sources":["C:/Users/Maou/Documents/Projetos/CLIENTES/RNF/Completo/client/src/pages/Login/recovery.js"],"names":["React","connect","bindActionCreators","postResetPassword","postAuth","JWT_Decode","setDialog","authDialog","setAuth","setLoading","makeStyles","Button","CircularProgress","TextField","Card","CardActions","CardContent","Slide","logo","InputMask","useStyles","theme","root","maxWidth","display","flexDirection","margin","appBar","position","title","marginLeft","spacing","flex","media","height","Transition","forwardRef","props","ref","ResetPassword","useState","loginError","setLoginerror","success","message","resetError","setReseterror","loading","setloading","resetpwd","setResetpwd","dados","setDados","classes","onChange","e","dt","target","id","value","onSubmitReset","preventDefault","token","match","params","putResetPassword","data","undefined","window","location","href","setSnackbar","open","onSubmit","localStorage","setItem","JSON","stringify","user","marginTop","marginBottom","alignSelf","background","mapStateToProps","store","aDialog","authReducer","appReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux';\r\nimport { postResetPassword,postAuth, JWT_Decode } from '../../providers/api'\r\nimport {setDialog as authDialog, setAuth} from '../../actions/authAction'\r\nimport {setLoading } from '../../actions/appActions'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Slide from '@material-ui/core/Slide';\r\n\r\nimport logo from '../../../assets/logo.png'\r\n\r\nimport InputMask from 'react-input-mask';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    maxWidth: 350,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    margin: 'auto'\r\n  },\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n  media: {\r\n    height: 140,\r\n  },\r\n}));\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nfunction ResetPassword(props) {\r\n  const [loginError, setLoginerror] = React.useState(false);\r\n  const [resetError, setReseterror] = React.useState({success: false, message: ''});\r\n  const [loading, setloading] = React.useState(false);\r\n  const [resetpwd, setResetpwd] = React.useState(false);\r\n  const [dados, setDados] = React.useState({});\r\n\r\n  const classes = useStyles();\r\n  function onChange(e) {\r\n    let dt = dados;\r\n    dt[e.target.id] = e.target.value\r\n    setDados(dt);\r\n  }\r\n  async function onSubmitReset(e) {\r\n    e.preventDefault();\r\n    setloading(true);\r\n    dados.token = props.match.params.token;\r\n    let data = await putResetPassword(dados);\r\n    if(data !== undefined) {\r\n      if(data.data.success){\r\n        setLoginerror(false);\r\n        setloading(false);\r\n        window.location.href=\"/\";\r\n      }else{\r\n        setLoginerror(true)\r\n        setloading(false);\r\n      }\r\n      props.setSnackbar({open: true, message: data.data.message})\r\n    }\r\n  }\r\n\r\n  async function onSubmit(e) {\r\n    e.preventDefault();\r\n    setloading(true);\r\n    let data = await postAuth(dados);\r\n    if(data !== undefined) {\r\n      if(data.data.success){\r\n        localStorage.setItem(\"user\", JSON.stringify(data.data.data.user));\r\n        localStorage.setItem(\"token\", data.data.token);\r\n        props.setAuth(data.data.data.user);\r\n        setLoginerror(false);\r\n        setloading(false);\r\n        window.location.href=\"/\";\r\n      }else{\r\n        setLoginerror(true)\r\n        setloading(false);\r\n      }\r\n    }\r\n  }\r\n  //\r\n  return (\r\n    <div>\r\n      <img src={logo} style={{display: 'flex', margin: 'auto'}} height=\"150\" width=\"150\" />\r\n      {!resetpwd ?(\r\n        <form id=\"loginform\" onSubmit={onSubmit}>\r\n        <Card className={classes.root}>\r\n            <CardContent>\r\n              <div>\r\n              {/*<InputMask id=\"username\" label=\"Usuário\" mask=\"999.999.999-99\" maskChar=\" \" onChange={onChange}>\r\n                {(inputProps) =>\r\n                  <TextField\r\n                  error={loginError === true ? true : false}\r\n                  helperText={ loginError ? \"Usuário ou senha invalidos.\" : \"\"}\r\n                  fullWidth id=\"username\" label=\"Usuário\" variant=\"outlined\" onChange={onChange} />\r\n                }\r\n              </InputMask> */}\r\n              <TextField\r\n                error={loginError === true ? true : false}\r\n                helperText={ loginError ? \"E-mail ou senha inválidos.\" : \"\"}\r\n                type=\"text\"\r\n                fullWidth id=\"email\" type=\"text\" label=\"E-Mail\" variant=\"outlined\" \r\n                onChange={onChange}\r\n                onBlur={onChange} />\r\n              </div><br />\r\n              <div>\r\n              <TextField\r\n                error={loginError === true ? true : false}\r\n                //helperText={ loginError ? \"E-mail ou senha inválidos.\" : \"\"}\r\n                type=\"text\"\r\n                fullWidth id=\"password\" type=\"password\" label=\"Senha\" variant=\"outlined\" \r\n                onChange={onChange}\r\n                onBlur={onChange} />\r\n              </div>\r\n            </CardContent>\r\n            \r\n         \r\n            <CardActions style={{flexDirection: 'column'}}>\r\n            <div style={{marginTop: 5, marginBottom: 5, alignSelf: 'start'}}>\r\n              <a onClick={() => {\r\n                setResetpwd(true);\r\n              }\r\n              }>Esqueceu a senha?</a>\r\n            </div><br />\r\n            {!loading ? (\r\n            <Button variant=\"contained\" size=\"large\" fullWidth color=\"primary\" disableElevation type=\"submit\" form=\"loginform\"\r\n            style={{\r\n              background: 'linear-gradient(45deg, #025ea2 30%, #0086e8 90%)',\r\n            }}>\r\n              Entrar \r\n            </Button>\r\n            ) : (\r\n            <CircularProgress style={{margin: 'auto'}} />\r\n            )}\r\n            \r\n          </CardActions>\r\n          \r\n        </Card>\r\n      </form>\r\n      ) :(<form id=\"loginform\" onSubmit={onSubmitReset}>\r\n        <Card className={classes.root}>\r\n            <CardContent>\r\n              <div>\r\n              {/*<InputMask id=\"username\" label=\"Usuário\" mask=\"999.999.999-99\" maskChar=\" \" onChange={onChange}>\r\n                {(inputProps) =>\r\n                  <TextField\r\n                  error={loginError === true ? true : false}\r\n                  helperText={ loginError ? \"Usuário ou senha invalidos.\" : \"\"}\r\n                  fullWidth id=\"username\" label=\"Usuário\" variant=\"outlined\" onChange={onChange} />\r\n                }\r\n              </InputMask> */}\r\n              <TextField\r\n                error={resetError.success}\r\n                helperText={ resetError.success ? resetError.message : \"\" }\r\n                type=\"text\"\r\n                fullWidth id=\"email\" type=\"text\" label=\"E-mail\" variant=\"outlined\" \r\n                onChange={onChange}\r\n                onBlur={onChange} />\r\n              </div>\r\n            </CardContent>\r\n            \r\n         \r\n          <CardActions style={{flexDirection: 'column'}}>\r\n            <div style={{marginTop: 5, marginBottom: 5, alignSelf: 'start'}}>\r\n              <a onClick={() => {\r\n                setResetpwd(false);\r\n              }\r\n              }>Login</a>\r\n            </div><br />\r\n            {!loading ? (\r\n            <Button variant=\"contained\" size=\"large\" fullWidth color=\"primary\" disableElevation type=\"submit\" form=\"loginform\"\r\n            style={{\r\n              background: 'linear-gradient(45deg, #025ea2 30%, #0086e8 90%)',\r\n            }}>\r\n              Entrar \r\n            </Button>\r\n            ) : (\r\n            <CircularProgress style={{margin: 'auto'}} />\r\n            )}\r\n            \r\n          </CardActions>\r\n          \r\n        </Card>\r\n      </form>)}\r\n    </div>\r\n  );\r\n}\r\nconst mapStateToProps = store => ({\r\n  aDialog: store.authReducer.authDialog,\r\n  data: store.authReducer.data,\r\n  loading: store.appReducer.loading\r\n});\r\nconst mapDispatchToProps = dispatch =>\r\nbindActionCreators({ setLoading, authDialog, setAuth,JWT_Decode }, dispatch);\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ResetPassword)\r\n"]},"metadata":{},"sourceType":"module"}