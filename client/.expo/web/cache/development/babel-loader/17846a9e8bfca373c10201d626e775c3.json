{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport axios from 'axios';\nvar hostname = window === undefined ? \"yamitec.yamitec.com\" : window.location.hostname;\nvar apiHost = \"\";\nhostname = \"/api\";\n\nif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n  apiHost = \"http://localhost:8000/api\";\n} else {\n  apiHost = hostname;\n}\n\nvar token = localStorage.getItem(\"token\");\nexport var Api = function Api() {\n  return axios.create({\n    baseURL: apiHost\n  }).get(\"/\");\n};\nexport var JWT_Decode = function JWT_Decode(token) {\n  var base64Url = token.split('.')[1];\n  var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n  var jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {\n    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n  }).join(''));\n  return JSON.parse(jsonPayload);\n};\n\nfunction lower(obj) {\n  for (var prop in obj) {\n    console.log(prop);\n    if (obj[prop] !== \"type\") continue;\n    obj[prop.toLowerCase()] = obj[prop];\n  }\n\n  return obj;\n}\n\nexport var postAuth = function postAuth() {\n  var params,\n      data,\n      options,\n      response,\n      _args = arguments;\n  return _regeneratorRuntime.async(function postAuth$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          params = _args.length > 0 && _args[0] !== undefined ? _args[0] : {};\n          data = Object.entries(params).map(function (_ref) {\n            var _ref2 = _slicedToArray(_ref, 2),\n                key = _ref2[0],\n                val = _ref2[1];\n\n            return key + \"=\" + encodeURIComponent(val);\n          }).join('&');\n          options = {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            data: params,\n            url: apiHost + '/login'\n          };\n          _context.prev = 3;\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(axios(options));\n\n        case 6:\n          response = _context.sent;\n          return _context.abrupt(\"return\", response);\n\n        case 10:\n          _context.prev = 10;\n          _context.t0 = _context[\"catch\"](3);\n          console.log('Whoops! Houve um erro.', _context.t0.message || _context.t0);\n          return _context.abrupt(\"return\", {\n            data: {\n              success: false,\n              message: \"problema ao se conectar com o servidor!\"\n            }\n          });\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[3, 10]], Promise);\n};\nexport var getApiContributors = function getApiContributors() {\n  var params,\n      id,\n      data,\n      _args2 = arguments;\n  return _regeneratorRuntime.async(function getApiContributors$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          params = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : '';\n          id = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : undefined;\n          data = Object.entries(params).map(function (_ref3) {\n            var _ref4 = _slicedToArray(_ref3, 2),\n                key = _ref4[0],\n                val = _ref4[1];\n\n            return key + \"=\" + encodeURIComponent(val);\n          }).join('&');\n          return _context2.abrupt(\"return\", fetch(apiHost + \"/contributors/\" + (id != null ? id : '') + \"?\" + data, {\n            method: 'GET',\n            data: data,\n            mode: 'cors',\n            headers: new Headers({\n              'Content-Type': 'application/json',\n              'Authorization': 'Bearer ' + token\n            })\n          }).then(function (response) {\n            return response.json();\n          }).catch(function (error) {\n            console.log('Whoops! Houve um erro.', error.message || error);\n            return {\n              data: {\n                success: false,\n                message: \"problema ao se conectar com o servidor!\"\n              }\n            };\n          }));\n\n        case 4:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var postApiContributors = function postApiContributors() {\n  var params,\n      data,\n      options,\n      response,\n      _args3 = arguments;\n  return _regeneratorRuntime.async(function postApiContributors$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          params = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : {};\n          data = new FormData();\n          Object.entries(params).map(function (_ref5) {\n            var _ref6 = _slicedToArray(_ref5, 2),\n                key = _ref6[0],\n                val = _ref6[1];\n\n            data.append(key, val);\n          });\n          options = {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'multipart/form-data',\n              'Authorization': 'Bearer ' + token\n            },\n            data: data,\n            url: apiHost + '/contributors'\n          };\n          _context3.prev = 4;\n          _context3.next = 7;\n          return _regeneratorRuntime.awrap(axios(options));\n\n        case 7:\n          response = _context3.sent;\n          return _context3.abrupt(\"return\", response);\n\n        case 11:\n          _context3.prev = 11;\n          _context3.t0 = _context3[\"catch\"](4);\n          console.log('Whoops! Houve um erro.', _context3.t0.message || _context3.t0);\n          return _context3.abrupt(\"return\", {\n            data: {\n              success: false,\n              error: _context3.t0,\n              message: \"problema ao se conectar com o servidor!\"\n            }\n          });\n\n        case 15:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, [[4, 11]], Promise);\n};\nexport var putApiContributors = function putApiContributors(id) {\n  var _params$justification;\n\n  var params,\n      data,\n      options,\n      response,\n      _args4 = arguments;\n  return _regeneratorRuntime.async(function putApiContributors$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          params = _args4.length > 1 && _args4[1] !== undefined ? _args4[1] : {};\n          params.justification = (_params$justification = params.justification) != null ? _params$justification : \"Update\";\n          data = new FormData();\n          data.append(\"_method\", \"put\");\n          Object.entries(params).map(function (_ref7) {\n            var _ref8 = _slicedToArray(_ref7, 2),\n                key = _ref8[0],\n                val = _ref8[1];\n\n            data.append(key, val);\n          });\n          options = {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'multipart/form-data',\n              'Authorization': 'Bearer ' + token\n            },\n            data: data,\n            url: apiHost + (\"/contributors/\" + id)\n          };\n          _context4.prev = 6;\n          _context4.next = 9;\n          return _regeneratorRuntime.awrap(axios(options));\n\n        case 9:\n          response = _context4.sent;\n          return _context4.abrupt(\"return\", response);\n\n        case 13:\n          _context4.prev = 13;\n          _context4.t0 = _context4[\"catch\"](6);\n          console.log('Whoops! Houve um erro.', _context4.t0.message || _context4.t0);\n          return _context4.abrupt(\"return\", {\n            data: {\n              success: false,\n              error: _context4.t0,\n              message: \"problema ao se conectar com o servidor!\"\n            }\n          });\n\n        case 17:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, null, null, [[6, 13]], Promise);\n};\nexport var getApiDownloadFile = function getApiDownloadFile() {\n  var params,\n      _args5 = arguments;\n  return _regeneratorRuntime.async(function getApiDownloadFile$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          params = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : '';\n          axios({\n            method: 'post',\n            url: apiHost + \"/contributors/downloads?file_name=\" + params\n          }).then(function (response) {\n            console.log(response.data);\n            return;\n            var blob = new Blob([response.data], {\n              type: 'application/jpeg'\n            });\n            var link = document.createElement('a');\n            link.href = window.URL.createObjectURL(blob);\n            link.download = 'Report.jpg';\n            link.click();\n          }).catch(function (error) {\n            console.log('Whoops! Houve um erro.', error.message || error);\n            return {\n              data: {\n                success: false,\n                message: \"problema ao se conectar com o servidor!\"\n              }\n            };\n          });\n\n        case 2:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var getAddressByCepla = function getAddressByCepla() {\n  var params,\n      data,\n      options,\n      response,\n      _args6 = arguments;\n  return _regeneratorRuntime.async(function getAddressByCepla$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          params = _args6.length > 0 && _args6[0] !== undefined ? _args6[0] : '';\n\n          if (!(params.length >= 8)) {\n            _context6.next = 9;\n            break;\n          }\n\n          data = Object.entries(params).map(function (_ref9) {\n            var _ref10 = _slicedToArray(_ref9, 2),\n                key = _ref10[0],\n                val = _ref10[1];\n\n            return key + \"=\" + encodeURIComponent(val);\n          }).join('&');\n          options = {\n            method: 'GET',\n            headers: {\n              'Accept': 'application/json'\n            },\n            data: data,\n            url: \"http://cep.la/\" + params\n          };\n          _context6.next = 6;\n          return _regeneratorRuntime.awrap(axios(options));\n\n        case 6:\n          response = _context6.sent;\n          console.log(response.data);\n          return _context6.abrupt(\"return\", response);\n\n        case 9:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};","map":{"version":3,"sources":["C:/Users/Maou/Documents/Projetos/CLIENTES/RNF/Completo/client/src/providers/api/index.js"],"names":["axios","hostname","window","undefined","location","apiHost","process","env","NODE_ENV","token","localStorage","getItem","Api","create","baseURL","get","JWT_Decode","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","lower","obj","prop","console","log","toLowerCase","postAuth","params","data","Object","entries","key","val","encodeURIComponent","options","method","headers","url","response","message","success","getApiContributors","id","fetch","mode","Headers","then","json","catch","error","postApiContributors","FormData","append","putApiContributors","justification","getApiDownloadFile","blob","Blob","type","link","document","createElement","href","URL","createObjectURL","download","click","getAddressByCepla","length"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\n\r\nlet hostname = window === undefined ? \"yamitec.yamitec.com\" : window.location.hostname;\r\nlet apiHost = \"\"\r\nhostname = \"/api\";\r\nif (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\r\n  apiHost = \"http://localhost:8000/api\"\r\n} else {\r\n  apiHost = hostname;\r\n}\r\n//apiHost = hostname;\r\nlet token = localStorage.getItem(\"token\");\r\nexport const Api = () => {\r\n  return axios.create({\r\n    baseURL: apiHost,\r\n  }).get(\"/\");\r\n}\r\n\r\n/// COMON METHODS\r\n\r\nexport const JWT_Decode = (token) => {\r\n  var base64Url = token.split('.')[1];\r\n  var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n  var jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {\r\n    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n  }).join(''));\r\n  return JSON.parse(jsonPayload);\r\n}\r\n/// Lower Keys from object\r\nfunction lower(obj) {\r\n  for (let prop in obj) {\r\n    console.log(prop)\r\n    if (obj[prop] !== \"type\")\r\n      continue;\r\n    obj[prop.toLowerCase()] = obj[prop];\r\n  }\r\n  return obj;\r\n}\r\n/// new API METHOD\r\n/// Auth API Methods\r\n\r\nexport const postAuth = async (params = {}) => {\r\n  const data = Object.entries(params)\r\n    .map(([key, val]) => `${key}=${encodeURIComponent(val)}`)\r\n    .join('&');\r\n  const options = {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    data: params,\r\n    url: apiHost + '/login',\r\n  };\r\n  try {\r\n    const response = await axios(options);  // wrap in async function\r\n    return response;\r\n  } catch (error) {\r\n    console.log('Whoops! Houve um erro.', error.message || error)\r\n    return { data: { success: false, message: \"problema ao se conectar com o servidor!\" } }\r\n  }\r\n};\r\n/// list contributors\r\nexport const getApiContributors = async (params = '',id = undefined) => {\r\n  const data = Object.entries(params)\r\n    .map(([key, val]) => `${key}=${encodeURIComponent(val)}`)\r\n    .join('&');\r\n  return fetch(`${apiHost}/contributors/${id ?? ''}?${data}`, {\r\n    method: 'GET',\r\n    data,\r\n    mode: 'cors', // pode ser cors ou basic(default)\r\n    headers: new Headers({\r\n      'Content-Type': 'application/json',\r\n      'Authorization': 'Bearer ' + token//eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NCwib3JnYW5pemF0aW9uX2lkIjoxLCJpYXQiOjE2MTIzMDIyNTYsImV4cCI6MTYxMjkwNzA1Nn0.mnNuXdmqF487x_K4zfOkhhrkdJ6rwLB61NaSPhGZyJo'//localStorage.getItem('token')\r\n    }),\r\n  }).then((response) => {\r\n    return response.json();\r\n  }).catch((error) => {\r\n    console.log('Whoops! Houve um erro.', error.message || error)\r\n    return { data: { success: false, message: \"problema ao se conectar com o servidor!\" } }\r\n  });\r\n}\r\n/// create contributors\r\nexport const postApiContributors = async (params = {}) => {\r\n  const data = new FormData();\r\n  Object.entries(params)\r\n    .map(([key, val]) => {\r\n      data.append(key, val);\r\n      //`${key}=${encodeURIComponent(val)}`\r\n    });\r\n    //.join('&');\r\n    \r\n  const options = {\r\n    method: 'POST',\r\n    //mode: 'cors', // pode ser cors ou basic(default)\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data',\r\n      'Authorization': 'Bearer ' + token\r\n    },\r\n    data,\r\n    url: apiHost + '/contributors',\r\n  };\r\n  try{\r\n    const response = await axios(options);  // wrap in async function\r\n    return response;\r\n  } catch (error) {\r\n    console.log('Whoops! Houve um erro.', error.message || error)\r\n    return { data: { success: false, error ,message: \"problema ao se conectar com o servidor!\" } }\r\n  }\r\n}\r\n\r\n/// update contributors\r\nexport const putApiContributors = async (id,params = {}) => {\r\n  params.justification = params.justification  ?? \"Update\";\r\n  const data = new FormData();\r\n  data.append(\"_method\", \"put\");\r\n  Object.entries(params)\r\n    .map(([key, val]) => {\r\n      data.append(key, val);\r\n      //`${key}=${encodeURIComponent(val)}`\r\n    });\r\n    //.join('&');\r\n    \r\n  const options = {\r\n    method: 'POST',\r\n    //mode: 'cors', // pode ser cors ou basic(default)\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data',\r\n      'Authorization': 'Bearer ' + token\r\n    },\r\n    data,\r\n    url: apiHost +  `/contributors/${id}`,\r\n  };\r\n  try{\r\n    const response = await axios(options);  // wrap in async function\r\n    return response;\r\n  } catch (error) {\r\n    console.log('Whoops! Houve um erro.', error.message || error)\r\n    return { data: { success: false, error, message: \"problema ao se conectar com o servidor!\" } }\r\n  }\r\n}\r\n//Download Document\r\nexport const getApiDownloadFile = async (params = '') => {\r\n  axios({\r\n    method: 'post',\r\n    url: `${apiHost}/contributors/downloads?file_name=${params}`,\r\n    //responseType: 'arraybuffer',\r\n    //data: dates\r\n  }).then(function(response) {\r\n    console.log(response.data);\r\n    return;\r\n    let blob = new Blob([response.data], { type: 'application/jpeg' })\r\n    let link = document.createElement('a')\r\n    link.href = window.URL.createObjectURL(blob)\r\n    link.download = 'Report.jpg'\r\n    link.click();\r\n  }).catch((error) => {\r\n    console.log('Whoops! Houve um erro.', error.message || error)\r\n    return { data: { success: false, message: \"problema ao se conectar com o servidor!\" } }\r\n  });\r\n}\r\n\r\n\r\n// get address ViaCep\r\nexport const getAddressByCepla = async (params = '') => {\r\n  if (params.length >= 8) {\r\n    const data = Object.entries(params)\r\n      .map(([key, val]) => `${key}=${encodeURIComponent(val)}`)\r\n      .join('&');\r\n    const options = {\r\n      method: 'GET',\r\n      headers: { 'Accept': 'application/json' },\r\n      data,\r\n      url: `http://cep.la/${params}`,\r\n    };\r\n    const response = await axios(options);  // wrap in async function\r\n    console.log(response.data);\r\n    return response;\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}